<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template/template.xhtml">

    <ui:define name="content">
        <p:panel header="CiG" >            
            <h2 id='introduction'>
                Introduction
                <p:graphicImage title="Gestaltism"  value="#{resource['images/gestalt.png']}" style='float: right' rendered="true"/>             
            </h2>
            <p>

            </p>

            <h2 id='terminology'>
                Run the implementations
            </h2>
            <h:form>
                <p:panelGrid columns="3" styleClass="noBorders">

                    <p:commandButton value="Start"  action="#{resultPresenter.runExperiments()}" async="true" onclick="PF('pbAjax').start();PF('startButton2').disable();" widgetVar="startButton2" />

                    <p:progressBar widgetVar="pbAjax" ajax="true" value="#{resultPresenter.progress}" 
                                   labelTemplate="{value}%" styleClass="animated" global="false"  interval="5" style="width: 300px">
                        <p:ajax event="complete" listener="#{resultPresenter.onComplete}" oncomplete="PF('startButton2').enable()" update="resultsForm"/>
                    </p:progressBar>

                    <p:commandButton value="Cancel" actionListener="#{resultPresenter.onCancel()}" oncomplete="PF('pbAjax').cancel();PF('startButton2').enable();" />

                </p:panelGrid>
            </h:form>   

            <h2>
                Results
            </h2>

            <h:form id="resultsForm">

                <p:panel id="results" header="Results"  toggleable="true" rendered="#{not empty resultPresenter.experimentResults}">
                    <p:dataTable id="resultsTable" var="item" value="#{resultPresenter.experimentResults}" 
                                 rowKey="#{item.experiment}" filteredValue="#{resultPresenter.filteredResults}"
                                 rendered="#{not empty resultPresenter.experimentResults}">
                        <p:column headerText="Exp #" sortBy="#{item.experiment}" width="8%">
                            <h:outputText value="#{item.experiment}"/>
                        </p:column>
                        <p:column headerText="Size" sortBy="#{item.graphSize}" width="15%">
                            <h:outputText value="#{item.graphSize}"/>
                        </p:column>
                        <p:column headerText="With Cycles" sortBy="#{item.withCycles}" width="10%">
                            <h:outputText value="#{item.withCycles}"/>
                        </p:column>
                        <p:column headerText="Algorithm" sortBy="#{item.algorithmName}" filterBy="#{item.algorithmName}">
                            <h:outputText value="#{item.algorithmName}"/>
                        </p:column>
                        <p:column headerText="Has Cycles"  widht="10%">
                            <h:outputText value="#{item.hasCycles}"/>
                        </p:column>
                        <p:column headerText="Exec Time (ms)" sortBy="#{item.execTime}" >
                            <h:outputText value="#{item.execTime}" style="float: right">
                                <f:convertNumber type="number" minFractionDigits="3"/>
                            </h:outputText>                            
                        </p:column>
                    </p:dataTable>
                    <h:commandLink>
                        <p:graphicImage name="images/excel.png" title="Download as Excel"/>
                        <p:dataExporter type="xls" target="resultsTable" fileName="cig" />
                    </h:commandLink>

                    <h:commandLink>
                        <p:graphicImage name="images/pdf.png" title="Download as PDF"/>
                        <p:dataExporter type="pdf" target="resultsTable" fileName="cig"  />
                    </h:commandLink>

                    <h:commandLink>
                        <p:graphicImage name="images/csv.png"  title="Download as CSV"/>
                        <p:dataExporter type="csv" target="resultsTable" fileName="cig"  />
                    </h:commandLink>

                    <h:commandLink>
                        <p:graphicImage name="images/xml.png" title="Download as XML"/>
                        <p:dataExporter type="xml" target="resultsTable" fileName="cig" />
                    </h:commandLink>

                    <p:spacer height="30"/>
                    <p:separator />
                    <p:chart type="bar" model="#{resultPresenter.barChartForAcyclic}" style="height:300px" rendered="#{not empty resultPresenter.barChartForAcyclic}"/>

                    <p:spacer height="30"/>
                    <p:separator />
                    <p:chart type="bar" model="#{resultPresenter.barChartForCyclic}" style="height:300px" rendered="#{not empty resultPresenter.barChartForCyclic}"/>
                </p:panel>

            </h:form>

            <h2 id='api'>
                API                
            </h2>
            <p>Most of the information in CCDB can be accessed programmatically, using any language (C, C++, Java, Fortran, Python, Tcl/Tk etc) 
                and from within most tools such as MATLAB,  using CCDB's Application Programming Interface (API). The API is described in 
                <p:link href='/help/api' target="_blank">The CCDB API Manual</p:link>.</p>
        </p:panel>
    </ui:define>
</ui:composition>